{erl_opts, [
    debug_info,
    warn_export_vars,
    warn_shadow_vars,
    warn_obsolete_guard
]}.

{deps, [
    % JSON encoding/decoding
    {jsx, "3.1.0"},
    % YAML encoding/decoding
    {yamerl, "0.10.0"},
    % For cowboy types
    {cowboy, "2.9.0"},
    % For trails metadata
    {trails, "2.3.0"}
]}.

{plugins, [
    erlfmt,
    rebar3_lint
]}.

{erlfmt, [
    write,
    {files, [
        "{apps,src,test,ct,pt,priv,extra_src}/**/*.{erl,hrl,app.src,config}",
        "*.config",
        "rebar.lock",
        "*.config.script"
    ]},
    {print_width, 130}
]}.

{provider_hooks, []}.

{shell, [
    {apps, [rebar3_openapi_generator]}
]}.

{profiles, [
    {test, [
        {deps, [
            {proper, "1.4.0"}
        ]}
    ]}
]}.

{elvis, [
    #{
        dirs => ["src"],
        filter => "*.erl",
        ruleset => erl_files,
        rules => [
            {elvis_style, line_length, #{limit => 130}},
            {elvis_style, no_tabs},
            {elvis_style, no_trailing_whitespace},
            {elvis_style, macro_names},
            {elvis_style, operator_spaces, #{rules => [{right, ","}, {right, "++"}, {left, "++"}]}},
            {elvis_style, god_modules, #{limit => 50}},
            {elvis_style, used_ignored_variable},
            {elvis_style, no_behavior_info},
            {elvis_style, module_naming_convention, #{regex => "^[a-z]([a-z0-9]*_?)*$"}},
            {elvis_style, function_naming_convention, #{regex => "^[a-z]([a-z0-9]*_?)*$"}},
            {elvis_style, state_record_and_type},
            {elvis_style, no_spec_with_records}
        ]
    }
]}.
